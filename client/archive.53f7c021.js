import{S as t,i as e,s,T as l,e as r,c as n,a,d as c,f as i,h as o,U as h,y as d,z as p,M as f,V as u,W as m,N as g,t as v,r as $,b as x,u as y,j as E,k as z,v as j,w,x as C,X as I,m as _,A as V,o as D,Y as G,G as R,R as S,n as W,p as A}from"./client.f8a39cee.js";function F(t){let e,s,f,u;const m=t[7].default,g=l(m,t,t[6],null);return{c(){e=r("div"),g&&g.c(),this.h()},l(t){e=n(t,"DIV",{class:!0,style:!0});var s=a(e);g&&g.l(s),s.forEach(c),this.h()},h(){i(e,"class",s="__grid--masonry "+(t[0]?"__stretch-first":"")),i(e,"style",f=`--grid-gap: ${t[1]}; --col-width: ${t[2]};`)},m(s,l){o(s,e,l),g&&g.m(e,null),t[8](e),u=!0},p(t,[l]){g&&g.p&&64&l&&h(g,m,t,t[6],l,null,null),(!u||1&l&&s!==(s="__grid--masonry "+(t[0]?"__stretch-first":"")))&&i(e,"class",s),(!u||6&l&&f!==(f=`--grid-gap: ${t[1]}; --col-width: ${t[2]};`))&&i(e,"style",f)},i(t){u||(d(g,t),u=!0)},o(t){p(g,t),u=!1},d(s){s&&c(e),g&&g.d(s),t[8](null)}}}function M(t,e,s){let l,{$$slots:r={},$$scope:n}=e,{stretchFirst:a=!1}=e,{gridGap:c="0.5em"}=e,{colWidth:i="minmax(Min(20em, 100%), 1fr)"}=e,{items:o=[]}=e,h=[];const d=async()=>{h.forEach((async t=>{let e=getComputedStyle(t._el).gridTemplateColumns.split(" ").length;t.items.forEach((e=>{let s=e.getBoundingClientRect().height;s!==+e.dataset.h&&(e.dataset.h=s,t.mod++)})),(t.ncol!==e||t.mod)&&(t.ncol=e,t.items.forEach((t=>t.style.removeProperty("margin-top"))),t.ncol>1&&t.items.slice(e).forEach(((e,s)=>{let l=t.items[s].getBoundingClientRect().bottom,r=e.getBoundingClientRect().top;e.style.marginTop=l+t.gap-r+"px"})),t.mod=0)}))};let p;return f((()=>{p=window,p.addEventListener("resize",d,!1)})),u((()=>{p&&p.removeEventListener("resize",d,!1)})),t.$$set=t=>{"stretchFirst"in t&&s(0,a=t.stretchFirst),"gridGap"in t&&s(1,c=t.gridGap),"colWidth"in t&&s(2,i=t.colWidth),"items"in t&&s(4,o=t.items),"$$scope"in t&&s(6,n=t.$$scope)},t.$$.update=()=>{24&t.$$.dirty&&o&&s(3,l=l),8&t.$$.dirty&&l&&(async t=>{await m(),t.length&&"masonry"!==getComputedStyle(t[0]).gridTemplateRows&&(h=t.map((t=>({_el:t,gap:parseFloat(getComputedStyle(t).gridRowGap),items:[...t.childNodes].filter((t=>1===t.nodeType&&-1!=+getComputedStyle(t).gridColumnEnd)),ncol:0,mod:0}))),d())})([l])},[a,c,i,l,o,d,n,r,function(t){g[t?"unshift":"push"]((()=>{l=t,s(3,l),s(4,o)}))}]}class T extends t{constructor(t){super(),e(this,t,M,F,s,{stretchFirst:0,gridGap:1,colWidth:2,items:4,refreshLayout:5})}get refreshLayout(){return this.$$.ctx[5]}}function b(t,e,s){const l=t.slice();return l[4]=e[s],l}function L(t,e,s){const l=t.slice();return l[7]=e[s][0],l[8]=e[s][1],l}function N(t,e,s){const l=t.slice();return l[11]=e[s],l}function O(t){let e,s,l,h,d,p,f,u,m,g,j,w=t[11].title[t[0].current]+"",C=t[11].date+"",I=t[11].type[t[0].current]+"";return{c(){e=r("a"),s=r("div"),l=v(w),h=$(),d=r("div"),p=v(C),f=$(),u=r("div"),m=v(I),g=$(),this.h()},l(t){e=n(t,"A",{rel:!0,href:!0,class:!0});var r=a(e);s=n(r,"DIV",{class:!0});var i=a(s);l=x(i,w),i.forEach(c),h=y(r),d=n(r,"DIV",{class:!0});var o=a(d);p=x(o,C),o.forEach(c),f=y(r),u=n(r,"DIV",{class:!0});var v=a(u);m=x(v,I),v.forEach(c),g=y(r),r.forEach(c),this.h()},h(){i(s,"class","svelte-1z0xlx5"),i(d,"class","svelte-1z0xlx5"),i(u,"class","svelte-1z0xlx5"),i(e,"rel","prefetch"),i(e,"href",j="project/"+t[11].slug),i(e,"class","item svelte-1z0xlx5")},m(t,r){o(t,e,r),E(e,s),E(s,l),E(e,h),E(e,d),E(d,p),E(e,f),E(e,u),E(u,m),E(e,g)},p(t,e){1&e&&w!==(w=t[11].title[t[0].current]+"")&&z(l,w),1&e&&I!==(I=t[11].type[t[0].current]+"")&&z(m,I)},d(t){t&&c(e)}}}function B(t){let e,s,l="image"==t[8].type&&function(t){let e,s;return{c(){e=r("img"),this.h()},l(t){e=n(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){e.src!==(s=t[8].src)&&i(e,"src",s),i(e,"alt",""),i(e,"class","svelte-1z0xlx5")},m(t,s){o(t,e,s)},p:W,d(t){t&&c(e)}}}(t),h="video"==t[8].type&&function(t){let e,s,l;return{c(){e=r("video"),s=r("source"),this.h()},l(t){e=n(t,"VIDEO",{autoplay:!0,muted:!0,loop:!0,class:!0});var l=a(e);s=n(l,"SOURCE",{src:!0}),l.forEach(c),this.h()},h(){s.src!==(l=t[8].src)&&i(s,"src",l),e.autoplay=!0,e.muted=!0,e.loop=!0,i(e,"class","svelte-1z0xlx5")},m(t,l){o(t,e,l),E(e,s)},p:W,d(t){t&&c(e)}}}(t);return{c(){l&&l.c(),e=$(),h&&h.c(),s=G()},l(t){l&&l.l(t),e=y(t),h&&h.l(t),s=G()},m(t,r){l&&l.m(t,r),o(t,e,r),h&&h.m(t,r),o(t,s,r)},p(t,e){"image"==t[8].type&&l.p(t,e),"video"==t[8].type&&h.p(t,e)},d(t){l&&l.d(t),t&&c(e),h&&h.d(t),t&&c(s)}}}function U(t){let e,s,l=Object.entries(t[4].media),h=[];for(let e=0;e<l.length;e+=1)h[e]=B(L(t,l,e));return{c(){e=r("div");for(let t=0;t<h.length;t+=1)h[t].c();s=$(),this.h()},l(t){e=n(t,"DIV",{class:!0});var l=a(e);for(let t=0;t<h.length;t+=1)h[t].l(l);s=y(l),l.forEach(c),this.h()},h(){i(e,"class","photoset svelte-1z0xlx5")},m(t,l){o(t,e,l);for(let t=0;t<h.length;t+=1)h[t].m(e,null);E(e,s)},p(t,r){if(4&r){let n;for(l=Object.entries(t[4].media),n=0;n<l.length;n+=1){const a=L(t,l,n);h[n]?h[n].p(a,r):(h[n]=B(a),h[n].c(),h[n].m(e,s))}for(;n<h.length;n+=1)h[n].d(1);h.length=l.length}},d(t){t&&c(e),_(h,t)}}}function k(t){let e,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=U(b(t,s,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=G()},l(t){for(let e=0;e<l.length;e+=1)l[e].l(t);e=G()},m(t,s){for(let e=0;e<l.length;e+=1)l[e].m(t,s);o(t,e,s)},p(t,r){if(4&r){let n;for(s=t[2],n=0;n<s.length;n+=1){const a=b(t,s,n);l[n]?l[n].p(a,r):(l[n]=U(a),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=s.length}},d(t){_(l,t),t&&c(e)}}}function H(t){let e,s,l,h,f,u,m,g,z,D,G=t[1],W=[];for(let e=0;e<G.length;e+=1)W[e]=O(N(t,G,e));return g=new T({props:{colWidth:"minmax(Min(320px, 100%), 1fr);",$$slots:{default:[k]},$$scope:{ctx:t}}}),{c(){e=r("main"),s=r("div"),l=r("h1"),h=v("Archive"),f=$(),u=r("div");for(let t=0;t<W.length;t+=1)W[t].c();m=$(),j(g.$$.fragment),this.h()},l(t){e=n(t,"MAIN",{class:!0});var r=a(e);s=n(r,"DIV",{class:!0});var i=a(s);l=n(i,"H1",{class:!0});var o=a(l);h=x(o,"Archive"),o.forEach(c),f=y(i),u=n(i,"DIV",{class:!0});var d=a(u);for(let t=0;t<W.length;t+=1)W[t].l(d);d.forEach(c),m=y(i),w(g.$$.fragment,i),i.forEach(c),r.forEach(c),this.h()},h(){i(l,"class","title svelte-1z0xlx5"),i(u,"class","list svelte-1z0xlx5"),i(s,"class","wrapper svelte-1z0xlx5"),i(e,"class","svelte-1z0xlx5")},m(t,r){o(t,e,r),E(e,s),E(s,l),E(l,h),E(s,f),E(s,u);for(let t=0;t<W.length;t+=1)W[t].m(u,null);E(s,m),C(g,s,null),D=!0},p(t,[e]){if(3&e){let s;for(G=t[1],s=0;s<G.length;s+=1){const l=N(t,G,s);W[s]?W[s].p(l,e):(W[s]=O(l),W[s].c(),W[s].m(u,null))}for(;s<W.length;s+=1)W[s].d(1);W.length=G.length}const s={};16384&e&&(s.$$scope={dirty:e,ctx:t}),g.$set(s)},i(t){D||(d(g.$$.fragment,t),R((()=>{z||(z=I(e,S,{},!0)),z.run(1)})),D=!0)},o(t){p(g.$$.fragment,t),z||(z=I(e,S,{},!1)),z.run(0),D=!1},d(t){t&&c(e),_(W,t),V(g),t&&z&&z.end()}}}async function P(){let t=await this.fetch("project.json").then((t=>t.json())).then((t=>({projects:t})));return{archive:{...await this.fetch("experiments.json").then((t=>t.json())).then((t=>({experiments:t}))),...t}}}function X(t,e,s){let l;D(t,A,(t=>s(0,l=t)));let{archive:r}=e,n=r.projects,a=r.experiments;return t.$$set=t=>{"archive"in t&&s(3,r=t.archive)},[l,n,a,r]}export default class extends t{constructor(t){super(),e(this,t,X,H,s,{archive:3})}}export{P as preload};
